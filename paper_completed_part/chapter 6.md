## 6. PlanGEN을 이용한 평면도 자동 생성

### 6.1 PlanGEN 개요
본 연구에서 개발된 **PlanGEN**은 건축 설계의 개념 설계 과정에서 요구되는 평면 배치를 자동으로 생성하는 프로그램으로, 다양한 사용자 요구사항을 바탕으로 효율적인 공간 배치를 탐색하고 최적화하는 알고리즘을 구현하였다. PlanGEN은 사용자로부터 설계 공간과 세 가지 주요 요구사항을 입력받아 이를 바탕으로 다량의 평면 배치를 생성한다. 평면도의 최적화를 위해 본 연구에서 개발한 세 가지 핵심 알고리즘인 시드 셀 배치, 확장, 돌출 셀 최적화 기법이 순차적으로 적용된다.

PlanGEN은 직각 사각형뿐만 아니라 복잡한 굴곡을 가진 직교 폴리건 형태의 건축 배치도 지원한다. 방의 개수 및 종류에 대한 제약이 없으며, 그리드 공간의 한 셀당 크기는 사용자가 자유롭게 정의할 수 있다. 이를 통해 세밀한 크기 조정과 신속한 배치 옵션을 모두 지원한다. 본 연구에서는 각 셀의 변 길이를 1 m로 설정하여 셀당 면적을 1m²로 설정하였다.

PlanGEN의 설정 인터페이스는 크게 네 가지로 구성된다. 첫 번째, **치수 설정 화면**에서는 연산의 기본이 되는 최소 공간인 셀의 크기, 방의 개수, 벽의 두께 등을 정의할 수 있다. 두 번째, **방  설정 화면**에서는 요구되는 개수에 해당하는 방에 고유 이름을 부여할 수 있으며, 이 이름은 평면도 상에 약어로 표시된다. 세 번째, **사용자 요구사항 설정 화면**은 방향 요구사항, 크기 요구사항, 인접성 요구사항 등 각 세 가지 요구 사항을 별도의 화면에서 설정한다. 마지막으로, **동작 옵션 설정 화면**에서는 평면도 생성 시 시드별 생성 개수, 고요 모드 등의 프로그램 실행 관련 세부 사항을 설정할 수 있다.

생성된 요구사항 및 동작 옵션을 기반으로 PlanGEN은 평면 배치를 개별 또는 배치 모드로 자동 생성하며, 생성된 평면도는 저장 및 로드 기능을 통해 후속 검토가 가능하다. 또한, 생성된 평면도는 그림 파일 또는 CAD 도면으로 저장할 수 있어 다양한 활용이 가능하다.

그림 6.1은 PlanGEN의 주요 설정 화면 중 방 이름을 입력하는 인터페이스를 예시로 보여준다. 

<그림 6.1. 방 이름 설정 화면 예시>


그림 6.1은 PlanGEN의 주요 설정화면 중 하나로 생성하고자 하는 방과 이름을 입력한다. 
![[Pasted image 20240923210138.png]]
![[Pasted image 20240923211127.png]]
<그림 6.1. PlanGEN의 주요 화면과 평면도 생성 예시>

### 6.2 요구사항 설정
PlanGEN의 첫 번째 단계는 각 방의 요구사항을 설정하는 것이다. 사용자 입력 화면에서는 각 방의 최소 및 최대 면적, 방 간 인접성, 방의 방향성을 설정할 수 있다. 예를 들어, 거실(Living Room)은 남향이 요구되며, 주방(Kitchen)은 다이닝 룸(Dining Room)과 인접하게 배치되어야 한다는 요구사항을 설정할 수 있다. 이러한 요구사항은 PlanGEN이 평면도를 생성할 때 중요한 기준으로 사용된다.

### 6.3 평면도 생성 과정
요구사항이 입력된 후, PlanGEN은 랜덤 시드 셀 배치를 통해 평면도를 생성한다. 랜덤 시드 셀 배치는 각 방의 초기 위치를 무작위로 설정함으로써 다양한 설계 가능성을 탐색할 수 있게 한다. 그 후, 돌출 셀 최적화 기법이 적용되어 각 방의 불필요한 돌출 부분이 제거되며, 공간의 효율성을 극대화한다.

그림 6.2는 PlanGEN을 통해 생성된 평면도의 예시를 보여준다. 이 평면도는 각 방의 요구사항을 충족하며, 공간의 효율성이 극대화된 설계안으로 평가되었다.

<그림 6.2. 생성된 평면도 예시>



---

### 6.4 최적의 평면배치 생성

본 연구에서 제시한 PlanGEN은 사용자 요구사항과 공간적 일관성을 만족시키는 최적의 평면배치를 생성하기 위한 다양한 옵션을 제공한다. PlanGEN의 메인 화면에서 사용자는 평면배치 생성을 위한 여러 가지 메뉴 중 하나를  선택할 수 있으며, 독립적으로 알고리즘의 세부적인 동작 상태를 파악하기 위한 메뉴는 시드 셀 할당과 평면도 생성 기능이다.

먼저, **시드 셀 할당**은 초기 방의 위치를 결정하는 단계로, [Initial Room Location] 버튼을 클릭하면 실행된다. 해당 버튼을 클릭하면, 시드 셀 할당 알고리즘이 작동하여 방의 초기 위치를 시각적으로 확인할 수 있다. 사용자는 이 초기 상태에서 대략적인 방의 위치, 크기, 그리고 인접성을 파악할 수 있으며, 이를 바탕으로 평면도 생성의 방향을 설정할 수 있다. 제5장의 분석에서 세부적으로 살펴본 바 같이, 시드 셀의 위치는 평면도 전체의 성능에 상당한 영향을 미치며, 동일한 시드 셀이라도 넓은 범위의 설계 결과를 가져올 수 있다.  따라서 시드 셀을 기반으로 전체 배치의 성능을 정확히 예측하는 것은 어렵지만, 시드 셀이 생성된 이후 해당 시드 셀로 만든 평면배치 결과를 비교해 가며  최적의 결과를 탐색할 수 있다. 만약 초기 시드 셀이 일관되게 만족스럽지 않은 결과를 낸다면  새로운 시드 셀을 생성하여 다시 시도할 수 있으며, 같은 시드 셀이 대체적으로 비교적 양호한 결과를 낸다면 해당 시드 셀을 이용하여 더 많은 평면배치를 생성해볼 수 있을 것이다. 

다음으로, **평면도 생성(Create Floorplan)** 버튼은 현재 설정된 시드 셀을 기반으로 평면도를 생성하는 기능을 제공한다. 시드 셀이 미리 생성되지 않은 경우, 평면도 생성 버튼을 클릭하면 자동으로 시드 셀이 생성된 후 평면 배치가 이루어진다.  평면도 생성 결과는 적합성 평가 지표를 통해 평가되며, 인접성 만족도, 방향 만족도, 크기 만족도 등과 함께 제 3장에서 제시한 형태 측정 지표들이 함께 제시된다. 예를 들어, Figure 9는 왼쪽에서 생성된 시드 셀이 확장된 평면도 생성 화면을 보여준다. 여기서 인접성 만족도는 0.8, 방향 만족도는 1.0, 크기 만족도는 0.9로 평가되었으며, 인접성에 2배 가중치를 부여한 가중 평균값은 0.87을 가지는 것을 알 수 있다.  이와 같은 결과를 통해 사용자는 해당 시드 셀을 유지하거나 교체한 채  다른 평면 배치를 반복적으로 생성할 수 있다.

하나의 시드 셀에서 생성할 수 있는 평면도의 성능은  편차가 심하므로 하나의 시드 셀에서 여러 개의 평면도를 생성한 후 가장 적합성이 높은 평면도만 집중 관리할 수 있다. [Best Floorplan Per Seed] 메뉴를 사용하면 새로 생성된 시드 셀이나 불러온 시드 셀에 대해 설정된 횟수만큼 반복하여 평면 배치를 생성한 후, 가장 요구사항 만족도 적합성 가중 평균이 높은 평면도를 반환한다. 여러 차례의 시도가 필요할 수 있으며, 각 시도는 설정된 최적화 요구에 도달할 때까지 반복된다. 

최적의 배치를 탐색하기 위한 가장 유용한 방법은 시드셀을 변경해가며 특정 적합도 가중 평균이 특정 문턱값에 도달할 때까지 시도하는 것으로, 이는 [Generate Until Optimal] 메뉴를 통해서 가능하다. 이 때 가중 평균의 문턱값과 최대 시도 횟수가 사전에 설정되어 있어야 하며 기본값으로 0.95와 100번을 사용했다.  이 문턱값은 비교적 높다고 판단되었으나 지정한 100번의 최대 시도 횟수를 넘기지 않고 쉽게 도달했으며 총 35번의 실행에서 1번의 경우만 최대 시도 횟수를 넘겼다. 알고리즘은 지정된 최대 시도 횟수에 도달할 때까지 평면도 생성을 자동으로 반복하여 최적의 결과를 제공한다. Figure 10은 이 기능을 사용하여 35개의 최적 배치를 생성한 예시를 보여준다. 

평면도 생성 과정에서 **적합도의 문턱값을 넘기기 위해 필요한 시도 횟수**를 분석한 결과, 35회의 실험에서 평균 32.4회의 시도가 필요하였으며, 중간값은 24회였다. 최소 시도 횟수는 1회, 최대 시도 횟수는 100회로 기록되었으며, 이는 최대 허용 시도 횟수를 초과한 경우였다. 표준편차는 25.43으로 나타나, 시도 횟수에 상당한 변동성이 있음을 확인할 수 있었다. 일부 실험에서는 빠르게 적합성에 도달했으나, 다른 경우에는 많은 시도가 필요했다. 이는 시드 셀의 초기 배치와 무작위성에 따라 성능이 크게 달라질 수 있음을 시사한다.



---

이 문장은 논문에 맞게 내용을 체계적으로 정리하고, 사용된 용어와 흐름이 일관되도록 수정되었습니다.

### 6.5 결과 요약
PlanGEN을 사용한 평면도 자동 생성 과정은 방 배치, 인접성, 방향성 등의 다양한 요구사항을 효과적으로 충족시켰으며, 최종적으로 효율적인 평면도를 도출할 수 있었다. PlanGEN을 통해 생성된 평면도는 기존 수동 설계 방법에 비해 시간 효율성 및 설계 다양성 측면에서 우수한 결과를 보였다.

---

이 초안을 바탕으로 필요한 부분을 수정하거나 보완해 주세요.