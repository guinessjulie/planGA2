### 3.1 초기 설계 단위 배치 방법

건축 평면을 생성하기 위한 건축배치 공간 $G_{footprint}$는 $m\times{n}$ 크기의 격자 공간으로, 배치 공간(footprint은 내부 공간을 정의하는 2차원 배열로 표현된다.
 $$G_{footprint}​=\{(i, j)|g_{ij}​ = 1\}\tag{1}$$

평면 배치는 이 설계 공간 내의 모든 셀을 필요에 따라 서로 다른 방으로 할당하는 과정으로 정의된다. 각 방의 배치는 설계 공간의 특정 위치에서 시작하여, 인접한 셀로 확장된다. 이 초기 과정은 다음의 세 가지 주요 단계를 통해 이루어진다:

**1. 각 방의 시작 위치 결정**:
먼저 설계 공간 $G_{footprint}$에서 공간의 수 $k$만큼 무작위로 최소 단위의 격자 공간을 선택하며, 이를 시드 셀로 정의한다.  

$$
s_i = (x, y) \quad \text{where} \quad G_{x,y} = 1 \quad \text{and} \quad i = 1, 2, \dots, k
$$
시드 셀 집합 $S$는 각 방의 시작 위치를 나타내며, 초기에는 방 번호가 할당되지 않은 상태로 특정 값(255)으로 설정된다. 

 **2. 방번호 할당:** 
 이후 $k$ 개의 미할당 시드 셀에 고유한 방 번호가 할당된다.
$$G_{\text{init}} = \{s_{i} \mid s_{i} \in \{1, 2, \ldots, k\}, i \in S \}\tag{2} $$
 시드 셀 집합 $S$의 각 요소는 고유한 방 번호를 가지며, 그리드의 나머지 부분은 아직 할당되지 않았다.   각 시드 셀의 위치는  이후 방 배치에서 중요한 역할을 한다. 본 연구에서는 방향 최적화, 인접성 최적화, 그리고 무작위 방 배치를 제안하며, 사용자 요구에 따라 선택적으로 적용 가능하다.


#### 3.1.1 방향 요구 최적화를 위한 시작 셀 할당

 방향 요구 사항은 각 방이 특정 방향으로 배치되어야 한다는 설계상의 요구를 반영한다. 방들의 집합 $R = \{r_1, r_2, \dots, r_n\}$에서 각 방 $r_i$​는 특정 방향 $o_i$​ (동,서,남,북) 으로 배치되어야 한다.   방향 요구 사항 O은 방 $r_i$​와 방의 배치 방향 $o_i$의 쌍으로 이루어진 집합이다. 
$$O=\{(r_i​,o_i​) \mid r_i​ \in R,o_i​ \in \text{ \{East, West, South, North\} } ​\} \tag{3}$$

   방 $r_i$의 시드 셀 $s_i$는 요구된 방향에 유리한 위치에 배정되며, 방향 요구 사항   $O_i$​에 따라 경계선에 가까운 위치가 선택된다.  각 셀의 위치는 x,  y축에 따라  정렬되어 방향에 따른 스코어 리스트 $Sc_o$가 생성된다.  방 $r_i$는 방향 요구 사항에 따라 스코어 리스트에서 가장 높은 순위에 있는 셀 $C_i$에 배정된다. 

$$s_i​=\arg\max_{s_i}​Sc_o(O_i​) \tag{4}$$
#### 3.1.2 인접성 요구 최적화를 위한 시작 셀 할당


인접성 요구 $A$는 방들 간의 관계를 나타내는 이항 관계로 정의된다. 방 $r_i$와 인접해야 하는  방 $r_j$의 인덱스 쌍  $(r_i, r_j)$ 의 집합으로 표현된다.
$$A = \{ (r_i, r_j) \mid r_i, r_j \in R,\text{ } r_i \text{ and } r_j \text{ must be adjacent} \} \tag{5}$$

인접성 최적화 전략은 시드 셀 $s_i$가  미할당 시드셀 중 가장 가까운 거리에 있는 $s_j$를 선택하여 방 $r_i$와 방 $r_j$의 인접을 유도한다.

$$
s_i = \arg \min_{s_j \in \text{unassigned}} d_{i,j} \quad \text{where} \quad {(r_i, r_j) \in A} \tag{6}
$$
여기서 $d_{i,j}$는 방 $i$와 방 $j$ 간의 맨하탄 거리를 나타낸다. 맨해튼 거리는 두 점 간의 직교 좌표 상에서의 이동 거리를 계산하는 방식으로 식 (7)과 같다.
$$\text{Manhattan Distance} = |x_1 - x_2| + |y_1 - y_2|$$
인접성 요구 최적화는 아직 방 번호가 할당되지 않은 셀들 중에서 인접성 요구사항을 가장 잘 충족하는 위치에 방 번호가 할당된다.다만, 이 최적화는 두 시드 셀이 가까울수록 인접할 가능성이 커진다는 가정을 바탕으로 한다. 그러나 확장 과정에서 다른 방들이 배치되면서, 두 방의 생성하지 못할 수 있으며, 결과적으로 통계적으로는 미미한 수준의 인접성 향상만을 보여줄 가능성이 있다


#### 3.1.3  무작위 배치
방향과 인접성  요구 사항이 제시되지 않았거나 이 과정을 생략할 경우 모든 시드 셀은 무작위로 방번호를 할당받는다.  일부 방만 요구 사항이 제시되는 경우, 미할당 $s_i$은 할당되지 않은 나머지 방 번호에서 무작위로  할당받는다. 이를 통해 모든 시드 셀이 방 번호를 부여받고 초기 시드 셀의 배치가 완료된다. 


---
